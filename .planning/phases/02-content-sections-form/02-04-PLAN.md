---
plan: 02-04
title: "Demo Submission Form"
wave: 2
depends_on: ["02-01"]
files_modified:
  - index.html
  - css/styles.css
  - js/main.js
autonomous: true

must_haves:
  truths:
    - "User sees 'DIRECT SUBMISSION' header with warning about finished tracks"
    - "User can enter artist name (required)"
    - "User can enter contact email (required, validates email format)"
    - "User can enter release name (required)"
    - "User can select release type from dropdown (Single/EP/Album)"
    - "User can enter listen link (required, validates URL format)"
    - "User can select one or more genres via checkboxes"
    - "User can enter optional notes"
    - "User can submit with 'SEND TRANSMISSION' button"
    - "Invalid fields show red border and error message"
  artifacts:
    - path: "index.html"
      provides: "Demo form HTML with all fields"
      contains: "demo-form"
    - path: "css/styles.css"
      provides: "Form styling with error states"
      contains: ".form-error"
    - path: "js/main.js"
      provides: "Form validation logic"
      contains: "checkValidity"
  key_links:
    - from: "js/main.js"
      to: "index.html"
      via: "querySelector('.demo-form')"
      pattern: "demo-form"
---

<objective>
Build the complete demo submission form with all fields, custom styling, and client-side validation using the HTML5 Constraint Validation API.

Purpose: This is the primary conversion point - artists submit their demos here. Form must be professional, on-brand, and validate properly.
Output: Fully functional form with validation and error states.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-content-sections-form/02-RESEARCH.md

Dependencies:
- 02-01 creates section-header-group CSS if run first
- Existing js/main.js has smooth scroll code

Key research findings:
- Use novalidate on form to control error display
- Use HTML5 Constraint Validation API (checkValidity, validity.valueMissing, etc.)
- Custom checkboxes need position:absolute opacity:0 pattern for accessibility
- Add --color-error CSS variable for error states
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Error Color Variables to CSS</name>
  <files>css/styles.css</files>
  <action>
Add error color variables to the :root block in css/styles.css.

Find the existing :root block and add these two new variables after the semantic color aliases:

```css
/* Error States */
--color-error: #e74c3c;
--color-error-bg: rgba(231, 76, 60, 0.05);
```

Place these after the existing `--color-cta-text: var(--color-bg);` line.
  </action>
  <verify>
Run: grep -n "color-error" css/styles.css
Should show both --color-error and --color-error-bg defined in :root
  </verify>
  <done>
Error color variables added to CSS custom properties for consistent error state styling.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build Demo Form HTML and CSS</name>
  <files>index.html, css/styles.css</files>
  <action>
Replace the #submit-demos section placeholder with complete form section.

HTML structure for #submit-demos section:
```html
<section id="submit-demos" class="section">
  <div class="container">
    <header class="section-header-group">
      <h2 class="section-header">DIRECT SUBMISSION</h2>
      <p class="section-subheader section-warning">We only accept finished, mixed, and mastered tracks. Demos, rough cuts, and works-in-progress will not be reviewed. Make sure your music is ready for release before submitting.</p>
    </header>

    <form class="demo-form" novalidate>
      <div class="form-group">
        <label for="artist-name">Artist Name *</label>
        <input type="text" id="artist-name" name="artist-name" required>
        <span class="form-error" aria-live="polite"></span>
      </div>

      <div class="form-group">
        <label for="email">Contact Email *</label>
        <input type="email" id="email" name="email" required>
        <span class="form-error" aria-live="polite"></span>
      </div>

      <div class="form-group">
        <label for="release-name">Release Name *</label>
        <input type="text" id="release-name" name="release-name" required>
        <span class="form-error" aria-live="polite"></span>
      </div>

      <div class="form-group">
        <label for="release-type">Release Type *</label>
        <select id="release-type" name="release-type" required>
          <option value="">Select type...</option>
          <option value="single">Single</option>
          <option value="ep">EP</option>
          <option value="album">Album</option>
        </select>
        <span class="form-error" aria-live="polite"></span>
      </div>

      <div class="form-group">
        <label for="listen-link">Listen Link *</label>
        <input type="url" id="listen-link" name="listen-link" required placeholder="https://...">
        <span class="form-error" aria-live="polite"></span>
      </div>

      <fieldset class="form-group form-group-fieldset">
        <legend>Genre (select all that apply)</legend>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" name="genre" value="uk-rap">
            <span class="checkbox-custom"></span>
            UK Rap
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="genre" value="alternative">
            <span class="checkbox-custom"></span>
            Alternative
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="genre" value="electronic">
            <span class="checkbox-custom"></span>
            Electronic
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="genre" value="ambient">
            <span class="checkbox-custom"></span>
            Ambient
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="genre" value="neoclassical">
            <span class="checkbox-custom"></span>
            Neoclassical
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="genre" value="pop">
            <span class="checkbox-custom"></span>
            Pop
          </label>
        </div>
      </fieldset>

      <div class="form-group">
        <label for="notes">Notes (optional)</label>
        <textarea id="notes" name="notes" rows="4" placeholder="Tell us about your music, influences, and goals..."></textarea>
      </div>

      <button type="submit" class="cta-button form-submit">SEND TRANSMISSION</button>
    </form>
  </div>
</section>
```

Add comprehensive form CSS (add to "10. CONTENT SECTIONS" block or create new "11. FORM STYLES" block):

```css
/* =================================
   11. FORM STYLES
   ================================= */

.demo-form {
  max-width: 600px;
  margin: 0 auto;
}

.section-warning {
  color: var(--color-gold);
}

.form-group {
  margin-bottom: var(--space-lg);
}

.form-group-fieldset {
  border: none;
  padding: 0;
}

.form-group label,
.form-group legend {
  display: block;
  font-family: var(--font-sans);
  font-weight: var(--font-weight-semibold);
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-white);
  margin-bottom: var(--space-sm);
}

/* Input base styles */
.demo-form input[type="text"],
.demo-form input[type="email"],
.demo-form input[type="url"],
.demo-form select,
.demo-form textarea {
  width: 100%;
  padding: 0.875rem 1rem;
  background-color: transparent;
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: var(--color-white);
  font-family: var(--font-sans);
  font-size: 1rem;
  transition: border-color 0.2s ease, background-color 0.2s ease;
}

/* Focus state */
.demo-form input:focus,
.demo-form select:focus,
.demo-form textarea:focus {
  outline: none;
  border-color: var(--color-gold);
  background-color: rgba(197, 160, 89, 0.05);
}

/* Valid state */
.demo-form input.valid,
.demo-form select.valid,
.demo-form textarea.valid {
  border-color: var(--color-gold);
}

/* Invalid state */
.demo-form input.invalid,
.demo-form select.invalid,
.demo-form textarea.invalid {
  border-color: var(--color-error);
  background-color: var(--color-error-bg);
}

/* Error message */
.form-error {
  display: block;
  font-family: var(--font-sans);
  font-size: 0.75rem;
  color: var(--color-error);
  margin-top: var(--space-xs);
  min-height: 1.2em;
}

/* Placeholder styling */
.demo-form input::placeholder,
.demo-form textarea::placeholder {
  color: rgba(255, 255, 255, 0.4);
}

/* Select dropdown styling */
.demo-form select {
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23C5A059' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 1rem center;
  padding-right: 2.5rem;
  cursor: pointer;
}

.demo-form select option {
  background-color: var(--color-bg);
  color: var(--color-white);
}

/* Checkbox styling */
.checkbox-group {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: var(--space-sm);
}

.checkbox-group input[type="checkbox"] {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}

.checkbox-label {
  display: inline-flex;
  align-items: center;
  gap: var(--space-sm);
  padding: 0.5rem 0;
  cursor: pointer;
  font-family: var(--font-sans);
  font-size: 0.875rem;
  font-weight: var(--font-weight-regular);
  text-transform: none;
  color: var(--color-white);
  user-select: none;
}

.checkbox-custom {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 2px solid rgba(255, 255, 255, 0.5);
  position: relative;
  flex-shrink: 0;
  transition: all 0.2s ease;
}

/* Focus state for checkbox */
.checkbox-group input[type="checkbox"]:focus + .checkbox-custom {
  outline: 2px solid var(--color-gold);
  outline-offset: 2px;
}

/* Checked state */
.checkbox-group input[type="checkbox"]:checked + .checkbox-custom {
  background-color: var(--color-gold);
  border-color: var(--color-gold);
}

/* Checkmark */
.checkbox-group input[type="checkbox"]:checked + .checkbox-custom::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 6px;
  width: 5px;
  height: 10px;
  border: solid var(--color-bg);
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

/* Submit button */
.form-submit {
  width: 100%;
  margin-top: var(--space-lg);
}
```
  </action>
  <verify>
Open index.html in browser. Navigate to #submit-demos:
- "DIRECT SUBMISSION" header visible
- Warning text in gold about finished tracks
- All form fields render with dark styling
- Select dropdown shows custom arrow
- Checkboxes render as custom styled squares
- "SEND TRANSMISSION" button at bottom
  </verify>
  <done>
Demo form HTML and CSS complete. All fields styled with dark theme, gold accents, and custom checkbox/select styling.
  </done>
</task>

<task type="auto">
  <name>Task 3: Implement Form Validation JavaScript</name>
  <files>js/main.js</files>
  <action>
Add form validation logic to js/main.js. Keep the existing smooth scroll code and add form validation below it.

Add the following to the end of js/main.js (inside the DOMContentLoaded listener or after it):

```javascript
/**
 * Form Validation
 * Uses HTML5 Constraint Validation API with custom error messages
 */

const form = document.querySelector('.demo-form');

if (form) {
  const inputs = form.querySelectorAll('input:not([type="checkbox"]), select, textarea');

  // Real-time validation on blur
  inputs.forEach(input => {
    input.addEventListener('blur', () => validateField(input));
    input.addEventListener('input', () => {
      // Clear error on input if previously invalid
      if (input.classList.contains('invalid')) {
        validateField(input);
      }
    });
  });

  // Submit validation
  form.addEventListener('submit', (e) => {
    e.preventDefault();

    let isValid = true;
    inputs.forEach(input => {
      if (!validateField(input)) {
        isValid = false;
      }
    });

    if (isValid) {
      // Form is valid - show success state
      // Backend integration is v2 scope, so just show confirmation
      showFormSuccess();
    } else {
      // Focus first invalid field
      const firstInvalid = form.querySelector('.invalid');
      if (firstInvalid) {
        firstInvalid.focus();
      }
    }
  });
}

function validateField(field) {
  const formGroup = field.closest('.form-group');
  const errorSpan = formGroup ? formGroup.querySelector('.form-error') : null;

  // Skip validation for optional fields that are empty
  if (!field.hasAttribute('required') && field.value === '') {
    field.classList.remove('invalid', 'valid');
    if (errorSpan) errorSpan.textContent = '';
    return true;
  }

  // Reset custom validity
  field.setCustomValidity('');

  // Check native validity
  if (!field.checkValidity()) {
    field.classList.add('invalid');
    field.classList.remove('valid');

    if (errorSpan) {
      // Set custom error messages
      if (field.validity.valueMissing) {
        errorSpan.textContent = 'This field is required.';
      } else if (field.validity.typeMismatch) {
        if (field.type === 'email') {
          errorSpan.textContent = 'Please enter a valid email address.';
        } else if (field.type === 'url') {
          errorSpan.textContent = 'Please enter a valid URL (https://...).';
        }
      } else if (field.validity.patternMismatch) {
        errorSpan.textContent = field.dataset.errorMessage || 'Invalid format.';
      } else {
        errorSpan.textContent = 'Please check this field.';
      }
    }

    return false;
  } else {
    field.classList.remove('invalid');
    field.classList.add('valid');
    if (errorSpan) errorSpan.textContent = '';
    return true;
  }
}

function showFormSuccess() {
  // Replace form with success message
  const formContainer = form.parentElement;
  form.style.display = 'none';

  const successMessage = document.createElement('div');
  successMessage.className = 'form-success';
  successMessage.innerHTML = `
    <h3 class="form-success-title">TRANSMISSION RECEIVED</h3>
    <p class="form-success-text">Thank you for your submission. Our team will review your music and get back to you within 5-7 business days.</p>
    <p class="form-success-note">Please ensure your listen link remains active during this period.</p>
  `;
  formContainer.appendChild(successMessage);
}
```

Also add success message CSS to styles.css (add after form styles):

```css
/* Form Success State */
.form-success {
  text-align: center;
  padding: var(--space-xl) 0;
}

.form-success-title {
  font-family: var(--font-sans);
  font-weight: var(--font-weight-bold);
  font-size: 1.5rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-gold);
  margin-bottom: var(--space-lg);
}

.form-success-text {
  font-family: var(--font-sans);
  font-size: 1rem;
  line-height: 1.7;
  color: var(--color-white);
  margin-bottom: var(--space-md);
}

.form-success-note {
  font-family: var(--font-sans);
  font-size: 0.875rem;
  color: var(--color-text-primary);
  opacity: 0.8;
}
```
  </action>
  <verify>
Open index.html in browser. Test form validation:
1. Try submitting empty form - should show error on required fields
2. Enter invalid email - should show "Please enter a valid email address"
3. Enter invalid URL - should show "Please enter a valid URL"
4. Fill all required fields correctly - form should show success message
5. Tab through checkboxes - should see focus outlines
  </verify>
  <done>
Form validation implemented using HTML5 Constraint Validation API. Real-time validation on blur, submit validation with error focus, custom error messages, and success state.
  </done>
</task>

</tasks>

<verification>
1. Open index.html in browser
2. Navigate to #submit-demos section
3. Verify header "DIRECT SUBMISSION" and warning text visible
4. Verify all 8 form fields present (artist name, email, release name, release type, listen link, genres, notes)
5. Test validation: leave required field empty, submit, verify red border and error message
6. Test email validation: enter "invalid", verify error message
7. Test URL validation: enter "not-a-url", verify error message
8. Fill form correctly and submit - verify success message appears
9. Run: grep -n "checkValidity\|validateField" js/main.js (should find validation code)
</verification>

<success_criteria>
- FORM-01: "DIRECT SUBMISSION" header visible
- FORM-02: Warning text about finished tracks only (in gold)
- FORM-03: Artist Name field present and required
- FORM-04: Contact Email field with email validation
- FORM-05: Release Name field present and required
- FORM-06: Release Type dropdown with Single/EP/Album options
- FORM-07: Listen Link field with URL validation
- FORM-08: Genre multi-select with 6 checkbox options
- FORM-09: Notes textarea (optional)
- FORM-10: "SEND TRANSMISSION" submit button
- FORM-11: Client-side validation with error states (red border, error messages)
</success_criteria>

<output>
After completion, create `.planning/phases/02-content-sections-form/02-04-SUMMARY.md`
</output>
